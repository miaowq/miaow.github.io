---
title: 消费者｜消息消费
categories:
  - mq
tags:
  - mq
  - kafka
abbrlink: a41a7325
date: 2023-12-08 23:00:04
---

> 本系列内容基于 kafka_2.12-2.3.1

# 推还是拉？为什么？

消息的消费一般有两种模式：推模式和拉模式。推模式是服务端主动将消息推送给消费者，而拉模式是消费者主动向服务端发起请求来拉取消息。

Kafka 中的消费是基于 `拉模式` 的。

<!-- more -->

优点：pull模式消费者自主决定是否批量从broker拉取数据，而push模式在无法知道消费者消费能力情况下，不易控制推送速度，太快可能造成消费者奔溃，太慢又可能造成浪费。

缺点：如果 broker 没有可供消费的消息，将导致 consumer 不断在循环中轮询，直到新消息到到达。为了避免这点，Kafka 有个参数可以让 consumer阻塞知道新消息到达(当然也可以阻塞知道消息的数量达到某个特定的量这样就可以批量发送)。

注意：在kafka-go中，如果没有消息，回卡在 reader.ReadMessage 直到有消息